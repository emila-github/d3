<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>线性缩放- 定义域和值域</title>
    <style type="text/css">


    </style>
    <script src="js/d3.js"></script>
    <script src="js/jquery.js"></script>
</head>
<body>

<script>
    $(document).ready(function () {

        var w = 500;
        var h = 500;
        var padding = 50;
        var dataset = [
            [5, 20], [480, 90], [250, 50], [100, 33], [330, 95],
            [410, 12], [475, 44], [25, 67], [85, 21], [220, 88]
        ];

//        //定义域和值域 ex:
//        var scale = d3.scale.linear()
//            .domain([100, 500])  //输入值范围   定义域范围
//            .range([10, 50]); //输出值范围   值域范围
//
//        console.log( scale(100), scale(500), scale(250)); // 10 50 25



        //坐标轴的缩放
        //Create scale functions
        //X轴缩放
        var xScale = d3.scale.linear()
                .domain([0, d3.max(dataset, function(d) { return d[0]; })])
                .range([0, w])
                .range([padding, w - padding])
                ;
        //Y轴缩放
        var yScale = d3.scale.linear()
                .domain([0, d3.max(dataset, function(d) { return d[1]; })])
                //.range([0, h])
                //.range([h, 0]) //Y轴值域倒转
                .range([h - padding, padding]) //SVG边缘不被截断
        ;



        //Create SVG element
        var svg = d3.select("body")
                .append("svg")
                .attr("width", w)
                .attr("height", h);

        svg.selectAll("circle")
                .data(dataset)
                .enter()
                .append("circle")
                //缩放后的坐标X值
                .attr("cx", function(d) {
                    return xScale(d[0]);
                })
                .attr("cy", function(d) {
                    return yScale(d[1]);
                })
                .attr("r", function(d) {
                    return Math.sqrt(h - d[1]);
                });


        svg.selectAll("text")
                .data(dataset)
                .enter()
                .append("text")
                .text(function(d) {
                    return d[0] + "," + d[1];
                })
                //设定文本坐标值
                .attr("x", function(d) {
                    return xScale(d[0]);
                })
                .attr("y", function(d) {
                    return yScale(d[1]);
                })
                .style("text-anchor", "middle") //居中
                .attr("font-family", "sans-serif")
                .attr("font-size", "11px")
                .attr("fill", "red");


    }); //document ready

</script>



</body>
</html>